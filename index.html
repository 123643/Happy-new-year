<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy New Year</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #messagePopup, #videoPopup {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            display: none;
        }

        button {
            font-size: 18px;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background: #ff6f61;
            color: white;
            transition: background 0.3s ease;
        }

        button:hover {
            background: #e65a50;
        }

        video {
            width: 100%;
            max-width: 800px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <!-- Message Popup -->
    <div id="messagePopup">
        <p>Can't wait to surprise you, future wife! ðŸ˜Š</p>
        <img src="https://media.tenor.com/-3Z-ojIe5IcAAAAj/bubu-dudu-sseeyall.gif" alt="Cute Bear" style="width: 100px; height: auto;">
        <p>Shake your phone for a surprise or click the button below:</p>
        <button id="nextButton">Next</button>
    </div>

    <!-- Video Popup -->
    <div id="videoPopup">
        <video id="videoFrame" autoplay muted controls>
            <source src="https://raw.githubusercontent.com/123643/Happy-new-year/e9e8ff2f288b06708eea30ef355309ad47ed7f84/assets/videos/lv_0_20250101000631.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <script>
        // Initial Screen: Display the message popup
        document.addEventListener("DOMContentLoaded", () => {
            document.getElementById("messagePopup").style.display = "block";

            // Add shake event listener
            if (window.DeviceMotionEvent) {
                let shakeThreshold = 15;
                let lastX = null, lastY = null, lastZ = null;

                window.addEventListener("devicemotion", (event) => {
                    let { x, y, z } = event.accelerationIncludingGravity;

                    if (lastX !== null && lastY !== null && lastZ !== null) {
                        let deltaX = Math.abs(lastX - x);
                        let deltaY = Math.abs(lastY - y);
                        let deltaZ = Math.abs(lastZ - z);

                        if (deltaX > shakeThreshold || deltaY > shakeThreshold || deltaZ > shakeThreshold) {
                            openVideoPopup();
                        }
                    }

                    lastX = x;
                    lastY = y;
                    lastZ = z;
                });
            }

            // Add click event for Next button
            document.getElementById("nextButton").addEventListener("click", () => {
                openVideoPopup();
            });

            // Handle back button to return to the message popup
            window.addEventListener("popstate", (event) => {
                if (event.state?.screen === "messagePopup") {
                    document.getElementById("videoPopup").style.display = "none";
                    document.getElementById("messagePopup").style.display = "block";
                }
            });
        });

        // Open the video popup
        function openVideoPopup() {
            document.getElementById("messagePopup").style.display = "none";
            document.getElementById("videoPopup").style.display = "block";
            history.pushState({ screen: "videoPopup" }, "Video Popup", "#videoPopup");
        }
    </script>
</body>
</html>
